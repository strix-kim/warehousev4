# üì¶ Equipment Module - –ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ü–µ–ª—å

Equipment –º–æ–¥—É–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è **–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –ø–æ—Å—Ç–∞–≤–∫–∏ —Ä–∞–∑–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º**. –û–Ω –∏–º–µ–µ—Ç **–ù–£–õ–ï–í–´–ï —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** –∏ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–µ–π –∫ –∑–∞–≥–ª—É—à–∫–∞–º.

## üèóÔ∏è –°–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### ‚úÖ –ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ equipment –º–æ–¥—É–ª—å:

```
src/features/equipment/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ equipment-api.js                    # ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–µ API –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ equipment-lists-api.js              # ‚úÖ API —Å–ø–∏—Å–∫–æ–≤ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è  
‚îÇ   ‚îî‚îÄ‚îÄ equipment-external-data-api.js      # ‚úÖ API –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è/—Ç–æ—á–∫–∏)
‚îú‚îÄ‚îÄ components/                             # ‚úÖ –í—Å–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ composables/                            # ‚úÖ –í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ constants/                              # ‚úÖ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏
‚îú‚îÄ‚îÄ store/                                  # ‚úÖ State management
‚îî‚îÄ‚îÄ index.js                                # ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–π API –º–æ–¥—É–ª—è
```

### üîÑ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**equipment-external-data-api.js** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥:

1. **üîç –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–æ–¥—É–ª–µ–π
2. **üì¶ –£—Å–ª–æ–≤–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã** - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –º–æ–¥—É–ª–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
3. **üé≠ –£–º–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏** - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
4. **üõ°Ô∏è Graceful degradation** - –ø–ª–∞–≤–Ω–∞—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

```javascript
// üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
const eventsAvailable = await isEventsModuleAvailable()

if (eventsAvailable) {
  // üì¶ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç
  const { fetchActiveEvents } = await import('@/features/events/api/eventApi')
} else {
  // üé≠ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∑–∞–≥–ª—É—à–∫–∏
  return await loadEventsStub()
}
```

## üìã –°—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ—Å—Ç–∞–≤–∫–∏

### üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª–Ω–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞
```
–ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –º–æ–¥—É–ª–∏:
‚îú‚îÄ‚îÄ equipment/     ‚úÖ
‚îú‚îÄ‚îÄ events/        ‚úÖ  
‚îî‚îÄ‚îÄ mount-points/  ‚úÖ

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
```

### üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 2: –¢–æ–ª—å–∫–æ equipment –º–æ–¥—É–ª—å
```
–ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ:
‚îú‚îÄ‚îÄ equipment/     ‚úÖ
‚îú‚îÄ‚îÄ events/        ‚ùå –ù–µ—Ç
‚îî‚îÄ‚îÄ mount-points/  ‚ùå –ù–µ—Ç

–†–µ–∑—É–ª—å—Ç–∞—Ç: Equipment —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∑–∞–≥–ª—É—à–∫–∞–º–∏
```

### üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
```
–ö–ª–∏–µ–Ω—Ç –∑–∞–º–µ–Ω—è–µ—Ç external-data-api –Ω–∞ —Å–≤–æ–π:
‚îú‚îÄ‚îÄ equipment/                    ‚úÖ
‚îú‚îÄ‚îÄ custom-events-integration/    ‚úÖ –ö–∞—Å—Ç–æ–º–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ custom-locations-api/         ‚úÖ –ö–∞—Å—Ç–æ–º–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–†–µ–∑—É–ª—å—Ç–∞—Ç: Equipment –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–∞
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í `equipment-external-data-api.js` **–ù–ï–¢** —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤:

```javascript
// üö´ –°–¢–ê–†–´–ô –ü–û–î–•–û–î (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã)
// import { fetchActiveEvents } from '@/features/events/api/eventApi'

// ‚úÖ –ù–û–í–´–ô –ü–û–î–•–û–î (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã)
async function loadEventsForEquipmentLists() {
  const eventsAvailable = await isEventsModuleAvailable()
  
  if (!eventsAvailable) {
    return await loadEventsStub() // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≥–ª—É—à–∫–∏
  }
  
  // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –º–æ–¥—É–ª—å –¥–æ—Å—Ç—É–ø–µ–Ω
  const { fetchActiveEvents } = await import('@/features/events/api/eventApi')
  // ...
}
```

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```javascript
// .env.client-a
VITE_HAS_EVENTS_MODULE=true
VITE_HAS_MOUNT_POINTS_MODULE=true

// .env.client-b  
VITE_HAS_EVENTS_MODULE=false
VITE_HAS_MOUNT_POINTS_MODULE=false
```

### 3. –£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

```javascript
const loadEvents = process.env.VITE_HAS_EVENTS_MODULE === 'true' 
  ? loadEventsForEquipmentLists 
  : loadEventsStub
```

## üì¶ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ—Å—Ç–∞–≤–∫–µ

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞
```bash
# –ö–æ–ø–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ equipment –º–æ–¥—É–ª—å
cp -r src/features/equipment/ client-package/

# –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ shared –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
cp -r src/shared/ui-v2/ client-package/shared/
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∫–∏–µ –º–æ–¥—É–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —É –∫–ª–∏–µ–Ω—Ç–∞
if [ ! -d "client-package/features/events" ]; then
  # –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ –∑–∞–≥–ª—É—à–∫–∏
  sed -i 's/loadEventsForEquipmentLists/loadEventsStub/g' equipment-external-data-api.js
fi
```

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–ª—è—Ü–∏–∏
```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–æ–ª—å–∫–æ —Å equipment –º–æ–¥—É–ª–µ–º
npm run test:equipment-only
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```javascript
// tests/equipment-isolation.test.js
describe('Equipment Module Independence', () => {
  it('should work without events module', () => {
    // –ú–æ–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–≥–æ events API
    jest.mock('@/features/events/api/eventApi', () => ({
      fetchActiveEvents: jest.fn().mockRejectedValue(new Error('Module not found'))
    }))
    
    // Equipment –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∑–∞–≥–ª—É—à–∫–∞–º–∏
    expect(loadEventsStub()).resolves.toBeTruthy()
  })
})
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ equipment –º–æ–¥—É–ª—è —É –∫–ª–∏–µ–Ω—Ç–∞:
1. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –∫–ª–∏–µ–Ω—Ç–∞
2. **–ó–∞–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ equipment/** –ø–∞–ø–∫—É  
3. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –∑–∞–Ω–æ–≤–æ
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

## ‚úÖ Checklist –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –ø–æ—Å—Ç–∞–≤–∫–µ

### –ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∫–ª–∏–µ–Ω—Ç—É:
- [ ] Equipment –º–æ–¥—É–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
- [ ] –ó–∞–≥–ª—É—à–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
- [ ] –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞
- [ ] –¢–µ—Å—Ç—ã –∏–∑–æ–ª—è—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ

---

**üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç: Equipment –º–æ–¥—É–ª—å –≥–æ—Ç–æ–≤ –∫ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –ø–æ—Å—Ç–∞–≤–∫–µ –ª—é–±—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º!**